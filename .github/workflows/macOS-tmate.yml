# https://github.com/P3TERX/ActionsVM

name: macOS (tmate)

on:
  workflow_dispatch:

jobs:
  Instance:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [macos-latest]
        build_type: [Release, RelWithDebInfo]
        qt_ver: [6.0.0]
        qt_arch: [clang_64]
    env:
      targetName: lemon
    steps:
    - name: Checkout
      uses: actions/checkout@main

    - name: Run Start Script
      run: source macos-start.sh
    - name: Cache Qt
      id: cache-qt
      uses: actions/cache@v1
      with:
        path: ../Qt
        key: ${{ runner.os }}-QtCache

    - name: Install Qt
      uses: jurplel/install-qt-action@v2
      with:
        cached: ${{ steps.cache-qt.outputs.cache-hit }}
      
    - name: Start SSH via tmate
      uses: P3TERX/ssh2actions@main

    - name: Run End Script
      run: source macos-end.sh
